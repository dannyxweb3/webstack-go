function search(o){$(".search-icon").css("opacity","1");var a=-1,n=0,t=userDefinedSearchData.custom?userDefinedSearchData:{thisSearch:"https://www.baidu.com/s?wd=",thisSearchIcon:"url("+o+")",hotStatus:!0,custom:!1,data:[{name:"\u767E\u5EA6",img:"url("+o+") -80px 0px",position:"0px 0px",url:"https://www.baidu.com/s?wd="},{name:"\u8C37\u6B4C",img:"url("+o+")  -105px 0px",position:"-40px 0px",url:"https://www.google.com/search?q="},{name:"\u5FC5\u5E94",img:"url("+o+")  -80px -25px",position:"0px -40px",url:"https://cn.bing.com/search?q="},{name:"\u597D\u641C",img:"url("+o+") -105px -25px",position:"-40px -40px",url:"https://www.so.com/s?q="},{name:"\u641C\u72D7",img:"url("+o+") -80px -50px",position:"0px -80px",url:"https://www.sogou.com/web?query="},{name:"\u6DD8\u5B9D",img:"url("+o+") -105px -50px",position:"-40px -80px",url:"https://s.taobao.com/search?q="},{name:"\u4EAC\u4E1C",img:"url("+o+") -80px -75px",position:"0px -120px",url:"http://search.jd.com/Search?keyword="},{name:"\u5929\u732B",img:"url("+o+") -105px -75px",position:"-40px -120px",url:"https://list.tmall.com/search_product.htm?q="},{name:"1688",img:"url("+o+") -80px -100px",position:"0px -160px",url:"https://s.1688.com/selloffer/offer_search.htm?keywords="},{name:"\u77E5\u4E4E",img:"url("+o+") -105px -100px",position:"-40px -160px",url:"https://www.zhihu.com/search?type=content&q="},{name:"\u5FAE\u535A",img:"url("+o+") -80px -125px",position:"0px -200px",url:"https://s.weibo.com/weibo/"},{name:"B\u7AD9",img:"url("+o+") -105px -125px",position:"-40px -200px",url:"http://search.bilibili.com/all?keyword="},{name:"\u8C46\u74E3",img:"url("+o+") -80px -150px",position:"0px -240px",url:"https://www.douban.com/search?source=suggest&q="},{name:"\u4F18\u9177",img:"url("+o+") -105px -150px",position:"-40px -240px",url:"https://so.youku.com/search_video/q_"},{name:"GitHub",img:"url("+o+") -80px -175px",position:"0px -280px",url:"https://github.com/search?utf8=\u2713&q="}]},p=localStorage.getItem("searchData");p&&t.custom===p.custom&&(t=JSON.parse(p));function u(s){var i=$(s).contents().filter(function(e,r){return r.nodeType===3}).text().trim();return i}function l(s){$.ajax({type:"GET",url:"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",async:!0,data:{wd:s},dataType:"jsonp",jsonp:"cb",success:function(i){if($("#box ul").text(""),n=i.s.length,n){$("#box").css("display","block");for(var e=0;e<n;e++)$("#box ul").append("<li><span>"+(e+1)+"</span> "+i.s[e]+"</li>"),$("#box ul li").eq(e).click(function(){var r=u(this);$("#txt").val(r),window.open(t.thisSearch+r),$("#box").css("display","none")}),e===0?($("#box ul li").eq(e).css({"border-top":"none"}),$("#box ul span").eq(e).css({color:"#fff",background:"#f54545"})):e===1?$("#box ul span").eq(e).css({color:"#fff",background:"#ff8547"}):e===2&&$("#box ul span").eq(e).css({color:"#fff",background:"#ffac38"})}else $("#box").css("display","none")},error:function(i){console.log(i)}})}$("#txt").keyup(function(s){if($(this).val()){if(s.keyCode==38||s.keyCode==40||!t.hotStatus)return;l($(this).val())}else $(".search-clear").css("display","none"),$("#box").css("display","none")}),$("#txt").keydown(function(s){if(s.keyCode===40){a===n-1?a=0:a++,$("#box ul li").eq(a).addClass("current").siblings().removeClass("current");var i=u($("#box ul li").eq(a));$("#txt").val(i)}if(s.keyCode===38){s.preventDefault&&s.preventDefault(),s.returnValue&&(s.returnValue=!1),a===0||a===-1?a=n-1:a--,$("#box ul li").eq(a).addClass("current").siblings().removeClass("current");var i=u($("#box ul li").eq(a));$("#txt").val(i)}s.keyCode===13&&(window.open(t.thisSearch+$("#txt").val()),$("#box").css("display","none"),$("#txt").blur(),$("#box ul li").removeClass("current"),a=-1)}),$("#txt").focus(function(){$(".search-box").css("box-show","inset 0 1px 2px rgba(27,31,35,.075), 0 0 0 0.2em rgba(3,102,214,.3)"),$(this).val()&&t.hotStatus&&l($(this).val())}),$("#txt").blur(function(){setTimeout(function(){$("#box").css("display","none")},250)});for(var c=0;c<t.data.length;c++)$(".search-engine-list").append('<li><span style="background:'+t.data[c].img+(t.custom?" 0% 0% / cover no-repeat":"")+'"/></span>'+t.data[c].name+"</li>");$(".search-icon, .search-engine").hover(function(){$(".search-engine").css("display","block")},function(){$(".search-engine").css("display","none")}),$("#hot-btn").click(function(){$(this).toggleClass("off"),t.hotStatus=!t.hotStatus,localStorage.searchData=JSON.stringify(t)}),t.hotStatus?$("#hot-btn").removeClass("off"):$("#hot-btn").addClass("off"),$(".search-engine-list li").click(function(){var s=$(this).index();t.thisSearchIcon=t.custom?t.data[s].img:t.data[s].position,t.custom?$(".search-icon").css("background",t.thisSearchIcon+" no-repeat").css("background-size","cover"):$(".search-icon").css("background-position",t.thisSearchIcon),t.thisSearch=t.data[s].url,$(".search-engine").css("display","none"),localStorage.searchData=JSON.stringify(t)}),t.custom?$(".search-icon").css("background",t.thisSearchIcon+" no-repeat").css("background-size","cover"):$(".search-icon").css("background-position",t.thisSearchIcon),$("#search-btn").click(function(){var s=$("#txt").val();s?(window.open(t.thisSearch+s),$("#box ul").html("")):layer.msg("\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF01",{time:500},function(){$("#txt").focus()})})}function switchNightMode(){var o=document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/,"$1")||"0";o=="0"?(document.body.classList.add("night"),document.cookie="night=1;path=/"):(document.body.classList.remove("night"),document.cookie="night=0;path=/")}
